import{_ as ne,R as ae,k as oe,b as se,d as re,c as ie}from"../chunks/firebase.ac0b247d.js";import{H as le}from"../chunks/control.f5b05b5f.js";import{s as ce,C as ue,g as P,c as S,l as C,B as de,h as R,d as T,i as $,m as I,k as L,D as V,E as me}from"../chunks/scheduler.d2f032b3.js";import{S as fe,i as he,d as F,p as W,v as _e,e as b,g as _,n as g,a as A,s as X,b as M,c as pe,t as D,j as ge,k as ve,m as be,l as we,h as ke}from"../chunks/index.4e9dc73d.js";import{U as ee,g as Ee,a as ye}from"../chunks/UserLink.71cf71f8.js";function Y(n,e){if(isNaN(n)||n<400||n>599)throw new Error(`HTTP error status codes must be between 400 and 599 â€” ${n} is invalid`);return new le(n,e)}new TextEncoder;const Pe=async({params:n})=>{var c,l;const e=ne(ie,"users"),o=ae(e,se("username","==",n.username),oe(1)),d=await re(o),p=(c=d.docs[0])==null?void 0:c.exists(),t=(l=d.docs[0])==null?void 0:l.data();if(!p)throw Y(404,"that user does not exist!");if(!t.published)throw Y(403,`The profile of @${t.username} is not public!`);return{username:t.username,photoURL:t.photoURL,bio:t.bio,links:t.links??[]}},Te=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"})),j="src/routes/[username]/+page.svelte";function Z(n,e,o){const d=n.slice();return d[1]=e[o],d}function z(n){let e,o,d,p;const t=[n[1]];let c={};for(let u=0;u<t.length;u+=1)c=ue(c,t[u]);o=new ee({props:c,$$inline:!0});const l={c:function(){e=P("li"),ge(o.$$.fragment),d=S(),this.h()},l:function(m){e=R(m,"LI",{class:!0});var v=$(e);ve(o.$$.fragment,v),d=T(v),v.forEach(b),this.h()},h:function(){_(e,"class","my-2"),L(e,j,29,6,612)},m:function(m,v){A(m,e,v),be(o,e,null),g(e,d),p=!0},p:function(m,v){const h=v&1?Ee(t,[ye(m[1])]):{};o.$set(h)},i:function(m){p||(M(o.$$.fragment,m),p=!0)},o:function(m){D(o.$$.fragment,m),p=!1},d:function(m){m&&b(e),we(o)}};return F("SvelteRegisterBlock",{block:l,id:z.name,type:"each",source:"(26:6) {#each data.links as item}",ctx:n}),l}function G(n){let e,o,d,p,t,c,l,u=n[0].username+"",m,v,h,B,N,E,x=(n[0].bio??"no bio yet...")+"",H,O,k,w;document.title=e="@"+n[0].username+" Links";let y=W(n[0].links),s=[];for(let f=0;f<y.length;f+=1)s[f]=z(Z(n,y,f));const te=f=>D(s[f],1,1,()=>{s[f]=null}),J={c:function(){o=P("meta"),p=S(),t=P("main"),c=P("h1"),l=C("@"),m=C(u),v=S(),h=P("img"),N=S(),E=P("p"),H=C(x),O=S(),k=P("ul");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l:function(r){const i=de("svelte-2pftis",document.head);o=R(i,"META",{name:!0,content:!0}),i.forEach(b),p=T(r),t=R(r,"MAIN",{class:!0});var a=$(t);c=R(a,"H1",{class:!0});var U=$(c);l=I(U,"@"),m=I(U,u),U.forEach(b),v=T(a),h=R(a,"IMG",{src:!0,alt:!0,width:!0,class:!0}),N=T(a),E=R(a,"P",{class:!0});var K=$(E);H=I(K,x),K.forEach(b),O=T(a),k=R(a,"UL",{class:!0});var Q=$(k);for(let q=0;q<s.length;q+=1)s[q].l(Q);Q.forEach(b),a.forEach(b),this.h()},h:function(){_(o,"name","description"),_(o,"content",d=n[0].bio),L(o,j,9,4,166),_(c,"class","text-7xl text-purple-500"),L(c,j,15,4,289),V(h.src,B=n[0].photoURL??"/user.png")||_(h,"src",B),_(h,"alt","photoURL"),_(h,"width","256"),_(h,"class","mx-auto"),L(h,j,19,4,367),_(E,"class","text-xl my-8"),L(E,j,26,4,488),_(k,"class","list-none"),L(k,j,27,4,550),_(t,"class","prose text-center mx-auto mt-8"),L(t,j,13,2,238)},m:function(r,i){g(document.head,o),A(r,p,i),A(r,t,i),g(t,c),g(c,l),g(c,m),g(t,v),g(t,h),g(t,N),g(t,E),g(E,H),g(t,O),g(t,k);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(k,null);w=!0},p:function(r,[i]){if((!w||i&1)&&e!==(e="@"+r[0].username+" Links")&&(document.title=e),(!w||i&1&&d!==(d=r[0].bio))&&_(o,"content",d),(!w||i&1)&&u!==(u=r[0].username+"")&&X(m,u),(!w||i&1&&!V(h.src,B=r[0].photoURL??"/user.png"))&&_(h,"src",B),(!w||i&1)&&x!==(x=(r[0].bio??"no bio yet...")+"")&&X(H,x),i&1){y=W(r[0].links);let a;for(a=0;a<y.length;a+=1){const U=Z(r,y,a);s[a]?(s[a].p(U,i),M(s[a],1)):(s[a]=z(U),s[a].c(),M(s[a],1),s[a].m(k,null))}for(ke(),a=y.length;a<s.length;a+=1)te(a);pe()}},i:function(r){if(!w){for(let i=0;i<y.length;i+=1)M(s[i]);w=!0}},o:function(r){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)D(s[i]);w=!1},d:function(r){r&&(b(p),b(t)),b(o),me(s,r)}};return F("SvelteRegisterBlock",{block:J,id:G.name,type:"component",source:"",ctx:n}),J}function Re(n,e,o){let{$$slots:d={},$$scope:p}=e;_e("Page",d,[]);let{data:t}=e;n.$$.on_mount.push(function(){t===void 0&&!("data"in e||n.$$.bound[n.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const c=["data"];return Object.keys(e).forEach(l=>{!~c.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Page> was created with unknown prop '${l}'`)}),n.$$set=l=>{"data"in l&&o(0,t=l.data)},n.$capture_state=()=>({UserLink:ee,data:t}),n.$inject_state=l=>{"data"in l&&o(0,t=l.data)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[t]}class $e extends fe{constructor(e){super(e),he(this,e,Re,G,ce,{data:0}),F("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:G.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{$e as component,Te as universal};
